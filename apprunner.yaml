version: 1.0
runtime: nodejs16
build:
  commands:
    pre-build:
      - npm ci
      - npm run build-ts
    build:
        - npm ci
        - npm run build


run:
  network:
    port: 4519
  command: npm run serve
  secrets:
    - name: METHOD_API_KEY
      value-from: "arn:aws:secretsmanager:us-east-1:792017225318:secret:doppler-q8uhG9:METHOD_API_KEY::"
    - name: AUTH0_CLIENT_SECRET
      value-from: "arn:aws:secretsmanager:us-east-1:792017225318:secret:doppler-q8uhG9:AUTH0_CLIENT_SECRET::"